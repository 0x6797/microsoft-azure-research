# Azure IoT Hub に関するよくあるかもしれない質問

## TOC

- [Azure IoT Hub とは何ですか？](#q1)
- [デバイスの最大登録数は？](#q2)
- [モジュールとは何ですか？](#q3)
- [デバイスからクラウドへはどの程度のメッセージ送信ができますか？](#q4)
- [デバイスからクラウドへのメッセージサイズの上限は？](#q5)
- [メッセージ以外にもデバイスからクラウドへデータを送信する方法は？](#q6)

## <a id="q1">Azure IoT Hub とはなんですか？</a>

## <a id="#q2">デバイスの最大登録数は？</a>
デバイスとモジュールを併せて、1,000,000 です。ただし[Microsoft サポート](https://azure.microsoft.com/support/options/)に問い合わせることにより、上限数の引き上げは可能です。

## <a id="q3">モジュールとは何ですか？</a>

## <a id="q4">デバイスからクラウドへはどの程度のメッセージ送信ができますか？</a>
エディションによって異なります。

| エディション | スロットル制限 |
| :--------: | :----------------- |
| Free | 1秒あたり 100 送信。または、ユニットごとに 1秒あたり 12 送信 |
| B1 | 1秒あたり 100 送信。または、ユニットごとに 1秒あたり 12 送信 |
| S1 | 1秒あたり 100 送信。または、ユニットごとに 1秒あたり 12 送信 |
| B2 | ユニットごとに 1秒あたり 120 送信 |
| S2 | ユニットごとに 1秒あたり 120 送信 |
| B3 | ユニットごとに 1秒あたり 6,000 送信 |
| S3 | ユニットごとに 1秒あたり 6,000 送信 |

ユニットとはエディションのインスタンスのことです。

たとえば、以下の条件を考えてみましょう。
- S1 を 100 ユニット用意
- 接続デバイスは 1,000

IoT Hub で処理可能なデバイスからの送信は

100 ユニット * 12送信 = 1200 送信/秒 となります。

デバイス同時接続数は 1,000 なので、デバイス 1,000 台が 1秒毎に常にメッセージを送信したとしても、まだ余裕があります。

次に、以下の条件を考えてみましょう
- S3 を　10 ユニット用意
- 接続デバイスは　1,000

10ユニット * 6,000送信 = 60,000 送信/秒

になります。したがって、各デバイスが170ミリ秒毎にメッセージを送信したとしても、理論値としては IoT Hub はメッセージを処理できる計算になります。

## <a id="q5">デバイスからクラウドへのメッセージサイズの上限は？</a>

4KB 毎にチャンキングされ、最大メッセージサイズは 256KB です。

## <a id="q6">メッセージ以外にもデバイスからクラウドへデータを送信する方法は？</a>

デバイス毎に 10個のファイルを同時にアップロードできます。